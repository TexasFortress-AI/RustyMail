# Task ID: 8
# Title: Migrate to official MCP Rust SDK
# Status: done
# Dependencies: 6
# Priority: high
# Description: Replace custom MCP implementations with the official rust-sdk from modelcontextprotocol
# Details:
Remove custom MCP transport implementations in src/mcp/adapters/legacy.rs. Integrate rmcp dependency from rust-sdk. Update service definitions using SDK tooling. Migrate stdio and SSE transports to use official SDK patterns. Ensure backward compatibility with existing MCP clients.

# Test Strategy:
Test MCP stdio interface with various clients. Verify SSE transport works with dashboard. Test backward compatibility with existing MCP integrations.

# Subtasks:
## 1. Remove legacy MCP transport implementations [done]
### Dependencies: None
### Description: Delete all custom MCP transport code from src/mcp/adapters/legacy.rs to eliminate legacy implementations.
### Details:
Identify and remove all custom transport logic, ensuring no references remain in the codebase.

## 2. Integrate official rmcp dependency from rust-sdk [done]
### Dependencies: 8.1
### Description: Add the official rmcp crate from the modelcontextprotocol/rust-sdk repository to the project dependencies.
### Details:
Update Cargo.toml to include rmcp with required features (e.g., server, transport-io, macros). Ensure all builds and dependency resolutions succeed.

## 3. Update service definitions using SDK tooling [done]
### Dependencies: 8.2
### Description: Refactor service definitions to use rmcp macros and types, replacing custom protocol logic.
### Details:
Leverage rmcp-macros for tool/service implementation. Replace manual serialization/deserialization with SDK-provided types.

## 4. Migrate stdio and SSE transports to official SDK patterns [done]
### Dependencies: 8.3
### Description: Refactor stdio and SSE transport layers to use rmcp's official transport modules and async patterns.
### Details:
Replace legacy transport code with rmcp's transport::stdio and transport::websocket modules. Ensure async/await usage aligns with SDK requirements.

## 5. Ensure backward compatibility with existing MCP clients [done]
### Dependencies: 8.4
### Description: Validate that all MCP interfaces remain compatible with current clients after migration.
### Details:
Test all supported transports and service endpoints with legacy clients. Address any protocol or behavioral regressions.

