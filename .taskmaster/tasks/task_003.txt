# Task ID: 3
# Title: Consolidate IMAP client to async-imap only
# Status: done
# Dependencies: 1, 2
# Priority: high
# Description: Refactor all IMAP client code to use async-imap exclusively, removing any dual-library patterns
# Details:
Update src/imap/client.rs to use only async-imap types and methods. Remove all type conversion functions between libraries. Standardize on AsyncImapSessionWrapper pattern. Ensure all IMAP operations (connect, authenticate, select, search, fetch, move, delete) work through async-imap only. Update error handling to map async-imap errors to domain errors.

# Test Strategy:
Create unit tests for each IMAP operation using async-imap. Test connection lifecycle, authentication, and basic operations. Verify error handling covers all async-imap error variants.

# Subtasks:
## 1. Refactor IMAP client to use async-imap types and methods exclusively [done]
### Dependencies: None
### Description: Update all IMAP client code in src/imap/client.rs to use only async-imap types and methods, removing any usage of other IMAP libraries.
### Details:
Replace all existing IMAP operations (connect, authenticate, select, search, fetch, move, delete) with their async-imap equivalents. Ensure all code paths utilize async-imap's API and data structures.

## 2. Remove dual-library patterns and type conversion functions [done]
### Dependencies: 3.1
### Description: Eliminate any code that supports multiple IMAP libraries or converts between their types.
### Details:
Delete all type conversion functions and dual-library abstractions. Ensure only async-imap types are present in the codebase.

## 3. Standardize on AsyncImapSessionWrapper pattern [done]
### Dependencies: 3.1
### Description: Refactor session management to consistently use the AsyncImapSessionWrapper abstraction for all IMAP operations.
### Details:
Update all session handling code to use AsyncImapSessionWrapper. Ensure that all IMAP commands are executed through this wrapper.

## 4. Update error handling to map async-imap errors to domain errors [done]
### Dependencies: 3.1
### Description: Refactor error handling logic to convert async-imap errors into the application's domain-specific error types.
### Details:
Identify all places where async-imap errors are returned or handled. Implement mapping logic to translate these errors to domain errors used throughout the application.

## 5. Comprehensively test all IMAP operations using async-imap [done]
### Dependencies: 3.2, 3.3, 3.4
### Description: Develop and execute unit tests for each IMAP operation to ensure correct functionality and error handling with async-imap.
### Details:
Write tests covering connect, authenticate, select, search, fetch, move, and delete operations. Include tests for error scenarios and edge cases.

