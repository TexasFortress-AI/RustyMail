# RustyMail Development Checklist

## Phase 1: Core IMAP Operations
- [x] Implement basic IMAP client connection
- [x] Add folder management operations
- [x] Implement email search and fetch
- [x] Add email movement between folders
- [x] Implement flag operations
- [x] Add email append functionality
- [x] Implement expunge operation
- [x] Add error handling and logging
- [x] Implement AsyncImapOps trait for TlsImapSession

## Phase 2: Module Structure & Visibility
- [x] Fix visibility issues in src/api/mcp_sse.rs
- [x] Resolve module path issues in src/api/mcp_stdio.rs
- [x] Update imports in src/api/rest.rs
- [x] Fix visibility modifiers in src/imap/client.rs
- [x] Resolve module path issues in src/imap/session.rs

## Phase 3: Type Resolution & Error Handling
- [x] Fix duplicate type definitions in src/api/mcp_sse.rs
- [x] Update error type conversions in src/imap/error.rs
- [x] Fix AsyncImapOps trait implementation in src/imap/session.rs
- [x] Resolve remaining type mismatches in src/api/mcp_stdio.rs
- [x] Update error handling in src/api/rest.rs

## Phase 4: Testing & Documentation
- [ ] Add unit tests for IMAP operations
- [ ] Add integration tests for API endpoints
- [ ] Update API documentation
- [ ] Add error handling documentation
- [ ] Document module structure and dependencies

## Task Log
- **Completed**: Fixed AsyncImapOps trait implementation in src/imap/session.rs
- **Time Taken**: 30 minutes
- **Notes**: Updated method signatures to match trait requirements, fixed error handling, and removed &mut self from methods since we're using Arc<Mutex<T>> for thread safety. Also added proper imports for IMAP types and traits.

- **Completed**: Resolved type mismatches in mcp_stdio.rs and updated error handling in rest.rs
- **Time Taken**: 45 minutes
- **Notes**: Fixed import statements in mcp_stdio.rs to properly reference MCP types needed for tests. Updated error handling in rest.rs to use BadRequest instead of InvalidRequest. Added error code constants in mcp/types.rs and improved ImapError to JsonRpcError conversion to match the current error enum variants. 