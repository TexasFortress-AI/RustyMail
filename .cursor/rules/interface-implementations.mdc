---
description: Analysis of interface implementations (REST, SSE, stdio) and their unique handling of email operations
globs: ["src/api/**/*.rs", "src/mcp/**/*.rs", "src/dashboard/api/**/*.rs"]
alwaysApply: false
---


# interface-implementations

The project implements three distinct interfaces for email operations:

## REST Interface
- Implements RESTful endpoints for IMAP operations with JSON payloads
- Manages authentication state through session tokens
- Maps domain errors to HTTP status codes (400-500 range)
- Handles concurrent client requests through connection pooling
- Provides endpoints for folder management, email search/retrieval

## SSE Interface 
- Manages real-time client connections through Server-Sent Events
- Broadcasts email state changes and notifications to connected clients
- Maintains client registration with unique UUIDs
- Implements heartbeat mechanism for connection health
- Handles client disconnection and cleanup

## stdio Interface
- Processes JSON-RPC commands received via stdin
- Provides line-oriented protocol for command/response
- Supports full IMAP operation set through JSON-RPC methods
- Maintains session state between commands
- Returns results and errors in JSON-RPC format

Common Interface Components:
- Shared IMAP session management
- Consistent error code mapping
- Common data models for emails and folders 
- Unified authentication handling
- Protocol-independent business operations

Each interface maintains its own connection state while sharing core IMAP functionality through a common session layer. The interfaces handle protocol-specific requirements while delegating actual email operations to shared business logic.

$END$